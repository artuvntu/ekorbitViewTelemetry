<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="EkOrbit Telemetry view">
    <meta name="author" content="EkOrbit">
    <title>EkOrbit Telemetry</title>
    <link rel="stylesheet" href="./css/style.css">
<script>
var recorridoBlimp;
function initMap() {
  var la = 19.328025;
  var lo = -99.181082;
  var ciudadUniversitaria = {lat: la,lng: lo };
  var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 9,
      center: ciudadUniversitaria
  });
  var puntosBlimp = [];
  for (var i = 0;i < 4 ;i++){
    puntosBlimp.push({
    lat: la + Math.random() ,
    lng: lo + Math.random()
    });
  }
  recorridoBlimp = new google.maps.Polyline({
      path: puntosBlimp,
      geodesic: true,
      strokeColor: '#FF0000',
      strokeOpacity: 1.0,
      strokeWeight: 2
    });
    recorridoBlimp.setMap(map);
}
window.onload = function () {
var puntosGiroscopioX = [];
var puntosGiroscopioY = [];
var puntosGiroscopioZ = [];
var puntosMagnetometroX = [];
var puntosMagnetometroY = [];
var puntosMagnetometroZ = [];

var tablaGyro = new CanvasJS.Chart("contenedorTablaGyro" , {
  title :{
    text: "Gyro",
  },
  axisY: {
    includeZero : false
  },
  data: [{
    type: "line",
    dataPoints: puntosGiroscopioX
  },{
    type: "line",
    dataPoints: puntosGiroscopioY
  },{
    type: "line",
    dataPoints: puntosGiroscopioZ
  }]
});
var tablaMagnetometro = new CanvasJS.Chart("contenedorTablaMagnetometro",{
  backgroundColor: "#F5DEB3",
  title :{
    text: "Magnetometer",
  },
  axisY: {
    includeZero : false
  },
  data: [{
    type: "line",
    dataPoints: puntosMagnetometroX
  },{
    type: "line",
    dataPoints: puntosMagnetometroY
  },{
    type: "line",
    dataPoints: puntosMagnetometroZ
  }]
});
var valorX = 0;
var valorY = 100;
var tiempoIntervalo = 100;
var cantidadDatos = 20;
var actualizarTabla = function () {
  valorY = valorY + Math.round(5 + Math.random() * (-10));
  puntosGiroscopioX.push({
    x: valorX,
    y: valorY
  });
  valorY = valorY + Math.round(5 + Math.random() * (-10));
  puntosGiroscopioY.push({
    x: valorX,
    y: valorY
  });
  valorY = valorY + Math.round(5 + Math.random() * (-10));
  puntosGiroscopioZ.push({
    x: valorX,
    y: valorY
  });

  valorY = valorY + Math.round(5 + Math.random() * (-10));
  puntosMagnetometroX.push({
    x: valorX,
    y: valorY
  });
  valorY = valorY + Math.round(5 + Math.random() * (-10));
  puntosMagnetometroY.push({
    x: valorX,
    y: valorY
  });
  valorY = valorY + Math.round(5 + Math.random() * (-10));
  puntosMagnetometroZ.push({
    x: valorX,
    y: valorY
  });
  valorX++;
  if (puntosGiroscopioX.length > cantidadDatos){
    puntosGiroscopioX.shift();
    puntosGiroscopioY.shift();
    puntosGiroscopioZ.shift();

    puntosMagnetometroX.shift();
    puntosMagnetometroY.shift();
    puntosMagnetometroZ.shift();
  }
  tablaGyro.render();
  tablaMagnetometro.render();
};
actualizarTabla(cantidadDatos);
setInterval(function(){actualizarTabla(cantidadDatos)}, tiempoIntervalo);
  var path  = recorridoBlimp.getPath();
    var la = 19.328025;
  var lo = -99.181082;
  path.push(google.maps.LatLng({lat: 41.879, lng: -87.624}));
}
</script>
  </head>
  <body>
    <header>
      <div class="container">
        <div id="branding">
          <img class="imagenLogo" src="./img/EkOrbitLogo.png">
        </div>
        <nav>
          <ul>
            <li class="current"><a href="index.html">Home</a></li>
            <li><a href="tableTest.html">Table</a></li>
            <li><a href="services.html">Services</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <section id="showcase">
      <div class="container">
        <h1>Telemetry View</h1>
        <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDqYQwm-I1PQmpDh0Dc7G5WF2lz_y0yOFg&callback=initMap"></script>
                <div id = "video" style="height: 300px; width: 30%;display: inline-block;">
          <video width="100%" height="100%" controls>
            <source src="./img/videoStream.m4v" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
        <div id="contenedorTablaGyro" style="height: 300px; width: 30%; display: inline-block;"></div>
        <div id="contenedorTablaMagnetometro" style="height: 300px; width: 30%;display: inline-block;"></div>
        <div id="map" style="height: 300px; width: 70%;display: inline-block;"></div>

      </div>
    </section>
<!-- 
    <section id="newsletter">
      <div class="container">
        <h1>Subscribe To Our Newsletter</h1>
        <form>
          <input type="email" placeholder="Enter Name...">
          <button type="submit" class="button_1">Subscribe</button>
        </form>
      </div>
    </section>

    <section id="boxes">
      <div class="container">
        <div class="box">
          <img src="./img/logo_html.png">
          <h3>HTML5 Markup</h3>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus mi augue, viverra sit amet ultricies</p>
        </div>
        <div class="box">
          <img src="./img/logo_css.png">
          <h3>CSS3 Styling</h3>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus mi augue, viverra sit amet ultricies</p>
        </div>
        <div class="box">
          <img src="./img/logo_brush.png">
          <h3>Graphic Design</h3>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus mi augue, viverra sit amet ultricies</p>
        </div>
      </div>
    </section>
 -->
    <footer>
      <p>EkOrbit, Copyright &copy; 2018</p>
    </footer>
  </body>
</html>
